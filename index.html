<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>이펙터</title>

    <!-- Fonts: Pretendard for Korean -->
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,800&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- PWA Settings -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Effector">
    <!-- Open Graph / Link Preview -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Effector">
    <meta property="og:description" content="대학생 맞춤형 학습 튜터">
    <meta property="og:image" content="icon-512.png?v=2">

    <link rel="apple-touch-icon" href="icon-512.png?v=3">
    <link rel="icon" type="image/png" href="icon-512.png?v=3">
    <link rel="shortcut icon" href="icon-512.png?v=3">

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => console.log('SW registered: ', registration))
                    .catch(registrationError => console.log('SW registration failed: ', registrationError));
            });
        }
    </script>
</head>

<body>

    <!-- Mobile Container Simulation -->
    <div id="mobile-container">

        <!-- Header -->
        <header class="app-header">
            <div class="logo">Effector</div>
            <div class="user-avatar" onclick="app.openProfileModal()">
                <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&q=80"
                    alt="Profile" class="profile-img-header">
            </div>
        </header>



        <!-- Main Content -->
        <main id="app">

            <!-- TAB 1: STATUS (My Status / Dashboard) -->
            <!-- TAB 1: STATUS (My Status / Dashboard) -->
            <section id="status-screen" class="screen">
                <div class="greeting-section">
                    <h2 class="greeting-title"><span id="display-name">스제융</span>님, 안녕하세요.</h2>
                    <p class="greeting-subtitle">오늘도 공부할 준비 되셨나요?</p>
                </div>

                <div class="search-banner-card">
                    <span class="e-logo">E</span>
                    <input type="text" id="home-search-input" class="search-input" placeholder="이펙터 AI에게 무엇이든 물어보세요"
                        onkeypress="if(event.key === 'Enter') app.handleHomeSearch()">
                    <i class="fas fa-magnifying-glass search-icon" onclick="app.handleHomeSearch()"></i>
                </div>

                <div class="quick-menu-container">
                    <div class="quick-menu-item" onclick="app.openStats()">
                        <div class="icon-circle color-blue"><i class="fas fa-chart-pie"></i></div>
                        <span class="menu-label">내 학습현황</span>
                    </div>
                    <div class="quick-menu-item" onclick="app.openQuiz()">
                        <div class="icon-circle color-orange"><i class="fas fa-pen-to-square"></i></div>
                        <span class="menu-label">학습퀴즈 풀기</span>
                    </div>
                    <div class="quick-menu-item" onclick="app.openSavedReels()">
                        <div class="icon-circle color-purple"><i class="fas fa-box-archive"></i></div>
                        <span class="menu-label">보관함</span>
                    </div>
                    <div class="quick-menu-item" onclick="app.openNotifications()">
                        <div class="icon-circle color-red"><i class="fas fa-bell"></i></div>
                        <span class="menu-label">알림</span>
                    </div>
                </div>


            </section>

            <!-- TAB 2: HOME (Reels) -->
            <section id="home-screen" class="screen">
                <div id="reels-container"></div>

                <!-- Global Sound Toggle (Fixed Position) -->
                <div id="global-sound-toggle" class="global-sound-toggle" onclick="app.toggleGlobalMute()">
                    <i class="fas fa-volume-up"></i>
                </div>
            </section>

            <!-- SCR 4: SAVED REELS -->
            <section id="saved-screen" class="screen">
                <div class="app-header" style="position: relative; justify-content: center;">
                    <button onclick="app.navigate('status')" style="position: absolute; left: 16px; font-size: 1.2rem;">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="logo" style="font-size:1.1rem; font-style:normal;">보관함</div>
                </div>
                <div id="saved-feed" class="reel-container" style="height: calc(100% - 60px);">
                    <!-- Saved Reels injected here -->
                </div>
            </section>

            <!-- TAB 3: UPLOAD (Documents) -->
            <section id="upload-screen" class="screen">
                <div class="app-header" style="justify-content: center; gap: 12px;">
                    <div class="logo"
                        style="color:var(--text-primary); font-family:var(--font-primary); font-size:1.2rem; font-style: normal;">
                        내 문서함</div>
                </div>

                <div class="doc-container container mt-20">
                    <!-- Grid Layout (Content Injected by JS) -->
                    <div class="doc-grid">
                        <!-- Initial New Card + Docs rendered here -->
                    </div>
                </div>
            </section>

            <!-- DELETE CONFIRMATION MODAL -->
            <div id="delete-modal" class="modal-overlay" style="display: none;">
                <div class="modal-content fade-up">
                    <div class="modal-icon"><i class="fas fa-trash-alt"></i></div>
                    <h3>문서 삭제</h3>
                    <p>정말로 이 문서를 삭제하시겠습니까?<br>삭제된 파일은 복구할 수 없습니다.</p>
                    <div class="modal-actions">
                        <button class="btn-cancel" onclick="app.closeModal()">취소</button>
                        <button class="btn-delete" onclick="app.executeDelete()">삭제하기</button>
                    </div>
                </div>
            </div>
            <!-- TAB 4: QUIZ (Hidden, triggered by logic) -->
            <section id="quiz-screen" class="screen">
                <div class="app-header" style="position: relative; justify-content: center;">
                    <button onclick="app.navigate('status')" style="position: absolute; left: 16px; font-size: 1.2rem;">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="logo" style="font-size:1.1rem; font-style:normal;">학습 퀴즈</div>
                </div>
                <div class="quiz-container" style="height: calc(100% - 60px);">
                    <div id="quiz-content">
                        <!-- Injected by JS -->
                    </div>
                </div>
            </section>

            <!-- STATS SCREEN (New) -->
            <section id="stats-screen" class="screen">
                <div class="app-header" style="position: relative; justify-content: center;">
                    <button onclick="app.navigate('status')" style="position: absolute; left: 16px; font-size: 1.2rem;">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="logo" style="font-size:1.1rem; font-style:normal;">내 학습 현황</div>
                </div>

                <div class="stats-container" style="padding: 20px; overflow-y: auto; height: calc(100% - 60px);">

                    <!-- 1. Watch Time Banner & Graph -->
                    <div class="stat-card blue-card" style="flex-direction:column; align-items:flex-start; gap:10px;">
                        <div style="display:flex; align-items:center; gap:20px; width:100%;">
                            <div class="stat-icon"><i class="fas fa-clock"></i></div>
                            <div class="stat-info">
                                <h3>오늘의 학습 시간</h3>
                                <div class="stat-value">45<span>분</span> 20<span>초</span></div>
                            </div>
                        </div>

                        <!-- Weekly Graph -->
                        <div class="weekly-graph">
                            <div class="graph-bar-group">
                                <div class="graph-bar" style="height: 0%;" data-height="30%"></div>
                                <span class="graph-label">월</span>
                            </div>
                            <div class="graph-bar-group">
                                <div class="graph-bar" style="height: 0%;" data-height="50%"></div>
                                <span class="graph-label">화</span>
                            </div>
                            <div class="graph-bar-group">
                                <div class="graph-bar" style="height: 0%;" data-height="40%"></div>
                                <span class="graph-label">수</span>
                            </div>
                            <div class="graph-bar-group">
                                <div class="graph-bar active" style="height: 0%;" data-height="80%"></div>
                                <span class="graph-label">목</span>
                            </div>
                            <div class="graph-bar-group">
                                <div class="graph-bar" style="height: 0%;" data-height="60%"></div>
                                <span class="graph-label">금</span>
                            </div>
                            <div class="graph-bar-group">
                                <div class="graph-bar" style="height: 0%;" data-height="20%"></div>
                                <span class="graph-label">토</span>
                            </div>
                            <div class="graph-bar-group">
                                <div class="graph-bar" style="height: 0%;" data-height="10%"></div>
                                <span class="graph-label">일</span>
                            </div>
                        </div>
                        <p class="stat-desc" style="width:100%; text-align:right;">어제보다 15분 더 공부했어요!</p>
                    </div>

                    <!-- 2. Progress Banner -->
                    <div class="stat-card green-card">
                        <div class="stat-info" style="width:100%">
                            <h3>현재 학습 진도율</h3>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" style="width: 0%;" data-width="82%"></div>
                            </div>
                            <div class="stat-value-row">
                                <span class="percent">82%</span>
                                <span class="message">"이 정도면 A+는 거뜬해요! 😎"</span>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Quiz Score Banner -->
                    <div class="stat-card orange-card" style="justify-content: space-between;">
                        <div style="display:flex; align-items:center; gap:20px;">
                            <div class="stat-icon"><i class="fas fa-trophy"></i></div>
                            <div class="stat-info">
                                <h3>나의 최근 퀴즈 성적</h3>
                                <div class="stat-value">95<span>점</span></div>
                                <p class="stat-desc">상위 5% 실력입니다.</p>
                            </div>
                        </div>
                        <div class="action-icon-btn" onclick="app.openQuiz()">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>

                </div>
            </section>

            <!-- NOTIFICATION SCREEN -->
            <section id="notification-screen" class="screen">
                <div class="app-header" style="position: relative; justify-content: center;">
                    <button onclick="app.navigate('status')" style="position: absolute; left: 16px; font-size: 1.2rem;">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="logo" style="font-size:1.1rem; font-style:normal;">알림</div>
                </div>
                <div
                    style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:calc(100% - 60px); color:#adb5bd;">
                    <i class="far fa-bell-slash" style="font-size:3rem; margin-bottom:15px; opacity:0.5"></i>
                    <p style="font-size:1rem;">아직 알림이 없습니다.</p>
                </div>
            </section>

            <!-- CHAT SCREEN (New) -->
            <section id="chat-screen" class="screen">
                <!-- Chat Header -->
                <!-- Chat Header -->
                <div class="app-header"
                    style="flex-shrink: 0; background:white; position: sticky; top: 0; z-index: 10; justify-content: center; position: relative;">
                    <button onclick="app.closeChat()" style="position: absolute; left: 16px;"><i
                            class="fas fa-chevron-left"></i></button>
                    <div class="logo" id="chat-header-title" style="font-size: 1rem;">AI에게 질문하기</div>
                </div>

                <!-- Chat Messages Area -->
                <div id="chat-messages"
                    style="flex-grow: 1; overflow-y: auto; padding: 16px; display: flex; flex-direction: column; gap: 10px;">
                    <!-- Date Separator -->
                    <div style="text-align: center; margin: 10px 0;">
                        <span
                            style="background: rgba(0,0,0,0.1); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem;">2026년
                            1월 18일 일요일</span>
                    </div>

                    <!-- Intro Message -->
                    <div class="chat-message received"
                        style="align-self: flex-start; max-width: 90%; margin-top: 10px; padding: 0 10px;">
                        <div
                            style="background: transparent; padding: 0; font-size: 1rem; line-height: 1.6; color: #111;">
                            안녕하세요! 무엇을 도와드릴까요?
                        </div>
                        <span style="font-size: 0.7rem; color: #999; margin-top: 6px; display: block;">오후 10:14</span>
                    </div>
                </div>

                <!-- Chat Input Area (Fixed Bottom) -->
                <div class="chat-input-bar"
                    style="flex-shrink: 0; background: white; padding: 10px 16px; display: flex; align-items: center; gap: 10px; border-top: 1px solid #eee;">
                    <button style="border: none; background: none; color: #868e96; font-size: 1.2rem;"><i
                            class="fas fa-plus"></i></button>

                    <div style="flex-grow: 1; position: relative;">
                        <input type="text" id="chat-input" placeholder="메시지를 입력하세요"
                            style="width: 100%; border: none; background: #f1f3f5; padding: 10px 14px; border-radius: 20px; outline: none; font-size: 0.95rem;"
                            onkeypress="if(event.key === 'Enter') app.sendMessage()">
                        <button onclick="app.sendMessage()"
                            style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); border: none; background: #495057; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                            <i class="fas fa-arrow-up" style="font-size: 0.8rem;"></i>
                        </button>
                    </div>
                </div>
            </section>

        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item" onclick="app.navigate('status')">
                <i class="fas fa-house"></i>
            </div>
            <div class="nav-item center-nav" onclick="app.navigate('home')">
                <i class="fas fa-clapperboard"></i>
            </div>
            <div class="nav-item" onclick="app.navigate('upload')">
                <i class="fas fa-circle-plus"></i>
            </div>
        </nav>

    </div>

    <!-- Profile Edit Modal -->
    <div id="profile-modal" class="modal-overlay" style="display: none;">
        <div class="modal-card">
            <h3>프로필 이름 수정</h3>
            <div class="input-group">
                <input type="text" id="username-input" value="스제융">
            </div>
            <div class="modal-actions">
                <button class="btn-cancel" onclick="app.closeProfileModal()">취소</button>
                <button class="btn-save" onclick="app.saveProfileName()">저장</button>
            </div>
        </div>
    </div>

    <!-- Custom Delete Modal -->
    <div id="delete-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content fade-up">
            <div class="modal-icon">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <h3>문서 삭제</h3>
            <p>이 문서를 정말로 삭제하시겠습니까?<br>삭제된 문서는 복구할 수 없습니다.</p>
            <div class="modal-actions">
                <button class="btn-cancel" onclick="app.closeModal()">취소</button>
                <button class="btn-delete" onclick="app.executeDelete()">삭제하기</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>


</html>